{"filter":false,"title":"Untitled.1","tooltip":"/client/js/Untitled.1","undoManager":{"mark":0,"position":0,"stack":[[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":121,"column":0}},"nl":"\n","lines":["var module = angular.module('app', ['ngRoute'])","","  module.controller('WalletCtrl', ['$scope',","    function ($scope)","  {","    if (!$id.loginStatus) return $id.goId();","","    $scope.reset_form = function ()","    {","      $scope.resilience_me = {","        currency: '',","        taxRate: ''","      };","      if ($scope.addForm) $scope.addForm.$setPristine();","    };","","    $scope.reset_form();","","    /**","     * Toggle \"add contact\" form","     */","    $scope.toggle_form = function ()","    {","      $scope.addform_visible = !$scope.addform_visible;","      $scope.reset_form();","    };","    ","","","    /**","     * Add a currency","     */","    $scope.create = function ()","    {","      var resilience_me = {","        currency: $scope.resilience_me.currency.toUpperCase(),","        taxRate: $scope.resilience_me.taxRate / 100","      };","      ","      ","","      // Enable the animation","      $scope.enable_highlight = true;","","      // Add an element","      $scope.userBlob.unshift(\"/resilience_me\", resilience_me);","","      // Hide the form","      $scope.toggle_form();","","      // Clear form","      $scope.reset_form();","    };","  }]);","","  module.controller('Resilience_meRowCtrl', ['$scope', '$location',","    function ($scope, $location) {","      $scope.editing = false;","","      /**","       * Switch to edit mode","       *","       * @param index","       */","      $scope.edit = function (index)","      {","        $scope.editing = true;","        $scope.editcurrency = $scope.entry.currency;","        $scope.edittaxRate = $scope.entry.taxRate;","      };","","      /**","       * Update contact","       *","       * @param index","       */","      $scope.update = function (index)","      {","        if (!$scope.inlineCurrency.editcurrency.$error.rpUnique) {","","","","          var entry = {","            currency: $scope.editcurrency,","            taxRate: $scope.edittaxRate","","          };","          ","","","          // Update blob","          $scope.userBlob.filter('/resilience_me', 'currency', $scope.entry.currency,","                                 'extend', '', entry);","","          $scope.editing = false;","        }","      };","","      /**","       * Remove contact","       *","       * @param index","       */","      $scope.remove = function (currency) {","        // Update blob","        $scope.userBlob.filter('/resilience_me', 'currency', $scope.entry.currency,","                               'unset', '');","      };","","      /**","       * Cancel contact edit","       *","       * @param index","       */","      $scope.cancel = function (index)","      {","        $scope.editing = false;","      };","","     ","    }]);"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":19}},"text":"(function(angular){"},{"action":"insertText","range":{"start":{"row":0,"column":19},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":22,"column":0}},"lines":["","    angular.module('ngError', ['ng'])","    ","    .directive('ngError', ['$parse', function($parse){","","        return {","            restrict: 'A',","            compile: function($element, attr) {","                var fn = $parse(attr['ngError']);","","                return function(scope, element, attr) {","                    element.on('error', function(event) {","                        scope.$apply(function() {","                            fn(scope, {$event:event});","                        });","                    });","                };","","            }","        };",""]},{"action":"insertText","range":{"start":{"row":22,"column":0},"end":{"row":22,"column":8}},"text":"    }]);"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":22,"column":8},"end":{"row":22,"column":8},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1416357881046,"hash":"2ef6a41fafcd101c917b631c2423b73f1aea853e"}